import telebot
import random
import time
from apscheduler.schedulers.background import BackgroundScheduler
from telebot import types

TOKEN = "7885782864:AAGfTvOlKb05N1uRzNklIgohrKxA3ixtlYs"
bot = telebot.TeleBot(TOKEN)

ECO = [
    "–ß–∞—â–µ —Ö–æ–¥–∏ –ø–µ—à–∫–æ–º –∏–ª–∏ –ø–æ–ª—å–∑—É–π—Å—è –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–º –≤–º–µ—Å—Ç–æ –º–∞—à–∏–Ω—ã.",
    "–ò—Å–ø–æ–ª—å–∑—É–π –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, —á—Ç–æ–±—ã —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—ã–±—Ä–æ—Å—ã CO‚ÇÇ.",
    "–í—ã–∫–ª—é—á–∞–π —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∞ –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è.",
    "–°–æ—Ä—Ç–∏—Ä—É–π –º—É—Å–æ—Ä –∏ —Å–¥–∞–≤–∞–π –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.",
    "–ü–æ–∫—É–ø–∞–π –º–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚Äî —ç—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥ –æ—Ç —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.",
    "–°–æ–∫—Ä–∞—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –º—è—Å–∞ ‚Äî –∂–∏–≤–æ—Ç–Ω–æ–≤–æ–¥—Å—Ç–≤–æ —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–ª–∏–º–∞—Ç.",
    "–ü–æ—Å–∞–¥–∏ –¥–µ—Ä–µ–≤–æ ‚Äî –æ–Ω–æ –ø–æ–≥–ª–æ—â–∞–µ—Ç —É–≥–ª–µ–∫–∏—Å–ª—ã–π –≥–∞–∑.",
    "–ò—Å–ø–æ–ª—å–∑—É–π —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –ª–∞–º–ø—ã –∏ –±—ã—Ç–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É.",
    "–£–º–µ–Ω—å—à–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–æ–≤ –∏ –æ—Ç–æ–ø–ª–µ–Ω–∏—è ‚Äî –æ–¥–µ–≤–∞–π—Å—è –ø–æ –ø–æ–≥–æ–¥–µ.",
    "–ü–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —ç–Ω–µ—Ä–≥–∏–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å.",
    "–í—ã–∫–ª—é—á–∞–π —Å–≤–µ—Ç, –∫–æ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—à—å –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.",
    "–ò—Å–ø–æ–ª—å–∑—É–π –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—É—é –±—É—Ç—ã–ª–∫—É –≤–º–µ—Å—Ç–æ –ø–ª–∞—Å—Ç–∏–∫–æ–≤–æ–π.",
    "–û—Ç–¥–∞–π —Å—Ç–∞—Ä—É—é –æ–¥–µ–∂–¥—É –Ω–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–º–µ—Å—Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è.",
    "–≠–∫–æ–Ω–æ–º—å –≤–æ–¥—É: –∑–∞–∫—Ä—ã–≤–∞–π –∫—Ä–∞–Ω, –∫–æ–≥–¥–∞ —á–∏—Å—Ç–∏—à—å –∑—É–±—ã.",
    "–û—Ç–∫–∞–∂–∏—Å—å –æ—Ç –ø–ª–∞—Å—Ç–∏–∫–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ ‚Äì –∏—Å–ø–æ–ª—å–∑—É–π –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ —Å—É–º–∫–∏.",
]

subscribers = set()

def main_keyboard():
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    btn1 = types.KeyboardButton("/—Å–æ–≤–µ—Ç")
    btn2 = types.KeyboardButton("/–ø–æ–¥–ø–∏—Å–∫–∞")
    btn3 = types.KeyboardButton("/–æ—Ç–ø–∏—Å–∫–∞")
    keyboard.add(btn1, btn2, btn3)
    return keyboard

@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id,
                     "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ–± —ç–∫–æ–ª–æ–≥–∏–∏ üåç\n\n"
                     "–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏–ª–∏ –≤–≤–µ–¥–∏ –∫–æ–º–∞–Ω–¥—É:\n"
                     "üìå /—Å–æ–≤–µ—Ç ‚Äì –ø–æ–ª—É—á–∏—Ç—å —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç\n"
                     "‚úÖ /–ø–æ–¥–ø–∏—Å–∫–∞ ‚Äì –ø–æ–ª—É—á–∞—Ç—å —Å–æ–≤–µ—Ç—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å\n"
                     "‚ùå /–æ—Ç–ø–∏—Å–∫–∞ ‚Äì –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É",
                     reply_markup=main_keyboard())

@bot.message_handler(commands=['—Å–æ–≤–µ—Ç'])
def send_advice(message):
    bot.send_message(message.chat.id, random.choice(ECO))

@bot.message_handler(commands=['–ø–æ–¥–ø–∏—Å–∫–∞'])
def subscribe(message):
    subscribers.add(message.chat.id)
    bot.send_message(message.chat.id, "–í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å–æ–≤–µ—Ç—ã üå±")

@bot.message_handler(commands=['–æ—Ç–ø–∏—Å–∫–∞'])
def unsubscribe(message):
    subscribers.discard(message.chat.id)
    bot.send_message(message.chat.id, "–í—ã –æ—Ç–ø–∏—Å–∞–ª–∏—Å—å –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ üì¥")

def send_daily_tips():
    for user_id in subscribers:
        try:
            bot.send_message(user_id, random.choice(ECO))
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è {user_id}: {e}")

scheduler = BackgroundScheduler()
scheduler.add_job(send_daily_tips, 'interval', hours=24)
scheduler.start()

bot.polling(none_stop=True)
